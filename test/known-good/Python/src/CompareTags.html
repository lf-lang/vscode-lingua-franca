<span class="source-lf comment-line-double-dash-lflang">
# Tests the lf.tag_compare() function in the python target.
</span>

<span class="source-lf meta-targetspec-lflang keyword-control-lflang">
target
</span>
<span class="source-lf meta-targetspec-lflang">
 
</span>
<span class="source-lf meta-targetspec-lflang constant-language-lflang">
Python
</span>
<span class="source-lf meta-targetspec-lflang">
 {
</span>

<span class="source-lf meta-targetspec-lflang variable-parameter-lflang">
  timeout
</span>
<span class="source-lf meta-targetspec-lflang">
: 
</span>
<span class="source-lf meta-targetspec-lflang constant-numeric-int-lflang">
10
</span>
<span class="source-lf meta-targetspec-lflang">
 
</span>
<span class="source-lf meta-targetspec-lflang constant-numeric-lflang">
msec
</span>
<span class="source-lf meta-targetspec-lflang">
,
</span>

<span class="source-lf meta-targetspec-lflang variable-parameter-lflang">
  fast
</span>
<span class="source-lf meta-targetspec-lflang">
: 
</span>
<span class="source-lf meta-targetspec-lflang constant-language-lflang">
false
</span>

<span class="source-lf meta-targetspec-lflang">
}
</span>

<span class="source-lf">

</span>

<span class="source-lf storage-modifier-lflang">
main
</span>
<span class="source-lf">
 
</span>
<span class="source-lf storage-modifier-lflang">
reactor
</span>
<span class="source-lf">
 
</span>
<span class="source-lf entity-name-type-lflang">
CompareTags
</span>
<span class="source-lf">
 {
</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-control-lflang">
preamble
</span>
<span class="source-lf">
 
</span>
<span class="source-lf meta-embedded-block-py">
{=
</span>

<span class="source-lf meta-embedded-block-py">
    
</span>
<span class="source-lf meta-embedded-block-py keyword-control-import-python">
import
</span>
<span class="source-lf meta-embedded-block-py">
 sys
</span>

<span class="source-lf meta-embedded-block-py">
  
</span>
<span class="source-lf meta-embedded-block-py">
=}
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
timer
</span>
<span class="source-lf">
 t(
</span>
<span class="source-lf constant-numeric-int-lflang">
0
</span>
<span class="source-lf">
, 
</span>
<span class="source-lf constant-numeric-int-lflang">
1
</span>
<span class="source-lf">
 
</span>
<span class="source-lf constant-numeric-lflang">
msec
</span>
<span class="source-lf">
)
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
logical
</span>
<span class="source-lf">
 
</span>
<span class="source-lf storage-modifier-lflang">
action
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
l
</span>

<span class="source-lf">

</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-control-lflang">
reaction
</span>
<span class="source-lf">
(t) 
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
 l 
</span>
<span class="source-lf meta-embedded-block-py">
{=
</span>

<span class="source-lf meta-embedded-block-py">
    tag1 = lf.tag()
</span>

<span class="source-lf meta-embedded-block-py">
    tag2 = lf.tag()
</span>

<span class="source-lf meta-embedded-block-py">
    if (lf.tag_compare(tag1, tag2) != 0 or not tag1 == tag2 or tag1 != tag2):
</span>

<span class="source-lf meta-embedded-block-py">
      self.sys.stderr.write("Tags should be equal\n")
</span>

<span class="source-lf meta-embedded-block-py">
      self.sys.exit(1)
</span>

<span class="source-lf meta-embedded-block-py">
    l.schedule(0, tag1)
</span>

<span class="source-lf meta-embedded-block-py">
  
</span>
<span class="source-lf meta-embedded-block-py">
=}
</span>

<span class="source-lf">

</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-control-lflang">
reaction
</span>
<span class="source-lf">
(l) 
</span>
<span class="source-lf meta-embedded-block-py">
{=
</span>

<span class="source-lf meta-embedded-block-py">
    tag3 = lf.tag()
</span>

<span class="source-lf meta-embedded-block-py">
    tag1 = l.value
</span>

<span class="source-lf meta-embedded-block-py">
    if (lf.tag_compare(tag1, tag3) != -1 or not tag1 < tag3 or tag1 >= tag3):
</span>

<span class="source-lf meta-embedded-block-py">
      self.sys.stderr.write("tag1 should be lesser than tag3\n")
</span>

<span class="source-lf meta-embedded-block-py">
      self.sys.exit(1)
</span>

<span class="source-lf meta-embedded-block-py">
    if (lf.tag_compare(tag3, tag1) != 1 or not tag3 > tag1 or tag3 <= tag1):
</span>

<span class="source-lf meta-embedded-block-py">
      self.sys.stderr.write("tag3 should be greater than tag1\n")
</span>

<span class="source-lf meta-embedded-block-py">
      self.sys.exit(1)
</span>

<span class="source-lf meta-embedded-block-py">
  
</span>
<span class="source-lf meta-embedded-block-py">
=}
</span>

<span class="source-lf">
}
</span>

<span class="source-lf">

</span>

