<span class="source-lf comment-line-double-dash-lflang">
// Smoke test for checking that the `is_present_fields` is setup correctly
</span>

<span class="source-lf comment-line-double-dash-lflang">
// for a complicated hierarchy of banks with multiports and actions.
</span>

<span class="source-lf meta-targetspec-lflang keyword-control-lflang">
target
</span>
<span class="source-lf meta-targetspec-lflang">
 
</span>
<span class="source-lf meta-targetspec-lflang constant-language-lflang">
C
</span>

<span class="source-lf">

</span>

<span class="source-lf storage-modifier-lflang">
reactor
</span>
<span class="source-lf">
 
</span>
<span class="source-lf entity-name-type-lflang">
R1
</span>
<span class="source-lf">
 {
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
logical
</span>
<span class="source-lf">
 
</span>
<span class="source-lf storage-modifier-lflang">
action
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
a1
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
logical
</span>
<span class="source-lf">
 
</span>
<span class="source-lf storage-modifier-lflang">
action
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
a2
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
output
</span>
<span class="source-lf">
[
</span>
<span class="source-lf variable-other-lflang">
2
</span>
<span class="source-lf">
] 
</span>
<span class="source-lf variable-other-lflang">
out
</span>
<span class="source-lf">
:
</span>
<span class="source-lf meta-embedded-block-cpp">
 
</span>
<span class="source-lf meta-embedded-block-cpp storage-type-lflang">
int
</span>

<span class="source-lf">

</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-control-lflang">
reaction
</span>
<span class="source-lf">
(
</span>
<span class="source-lf support-variable-lflang">
startup
</span>
<span class="source-lf">
) 
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
 out {
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>

<span class="source-lf">
    lf_set(out[
</span>
<span class="source-lf constant-numeric-int-lflang">
0
</span>
<span class="source-lf">
], 
</span>
<span class="source-lf constant-numeric-int-lflang">
42
</span>
<span class="source-lf">
);
</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
}
</span>

<span class="source-lf">

</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-control-lflang">
reaction
</span>
<span class="source-lf">
(
</span>
<span class="source-lf support-variable-lflang">
startup
</span>
<span class="source-lf">
) 
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
 out {
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>

<span class="source-lf">
    lf_set(out[
</span>
<span class="source-lf constant-numeric-int-lflang">
1
</span>
<span class="source-lf">
], 
</span>
<span class="source-lf constant-numeric-int-lflang">
43
</span>
<span class="source-lf">
);
</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
}
</span>

<span class="source-lf">
}
</span>

<span class="source-lf">

</span>

<span class="source-lf storage-modifier-lflang">
reactor
</span>
<span class="source-lf">
 
</span>
<span class="source-lf entity-name-type-lflang">
R4
</span>
<span class="source-lf">
 {
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
logical
</span>
<span class="source-lf">
 
</span>
<span class="source-lf storage-modifier-lflang">
action
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
a1
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
logical
</span>
<span class="source-lf">
 
</span>
<span class="source-lf storage-modifier-lflang">
action
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
a2
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
input
</span>
<span class="source-lf">
[3] in:
</span>
<span class="source-lf meta-embedded-block-cpp">
 
</span>
<span class="source-lf meta-embedded-block-cpp storage-type-lflang">
int
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
input
</span>
<span class="source-lf">
[3] in2:
</span>
<span class="source-lf meta-embedded-block-cpp">
 
</span>
<span class="source-lf meta-embedded-block-cpp storage-type-lflang">
int
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
input
</span>
<span class="source-lf">
[2] in3:
</span>
<span class="source-lf meta-embedded-block-cpp">
 
</span>
<span class="source-lf meta-embedded-block-cpp storage-type-lflang">
int
</span>

<span class="source-lf">

</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-control-lflang">
reaction
</span>
<span class="source-lf">
(
</span>
<span class="source-lf">
in) {
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>

<span class="source-lf">
    lf_print(
</span>
<span class="source-lf string-quoted-double-lflang">
"
</span>
<span class="source-lf string-quoted-double-lflang">
in = [%d, %d, %d]
</span>
<span class="source-lf string-quoted-double-lflang">
"
</span>
<span class="source-lf">
, in[
</span>
<span class="source-lf constant-numeric-int-lflang">
0
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
value, in[
</span>
<span class="source-lf constant-numeric-int-lflang">
1
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
value, in[
</span>
<span class="source-lf constant-numeric-int-lflang">
2
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
value);
</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
}
</span>

<span class="source-lf">

</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-control-lflang">
reaction
</span>
<span class="source-lf">
(
</span>
<span class="source-lf">
in2) {
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>

<span class="source-lf">
    lf_print(
</span>
<span class="source-lf string-quoted-double-lflang">
"
</span>
<span class="source-lf string-quoted-double-lflang">
in2 = [%d, %d, %d]
</span>
<span class="source-lf string-quoted-double-lflang">
"
</span>
<span class="source-lf">
, in2[
</span>
<span class="source-lf constant-numeric-int-lflang">
0
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
value, in2[
</span>
<span class="source-lf constant-numeric-int-lflang">
1
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
value, in2[
</span>
<span class="source-lf constant-numeric-int-lflang">
2
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
value);
</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
}
</span>

<span class="source-lf">

</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-control-lflang">
reaction
</span>
<span class="source-lf">
(
</span>
<span class="source-lf">
in3) {
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>

<span class="source-lf">
    lf_print(
</span>
<span class="source-lf string-quoted-double-lflang">
"
</span>
<span class="source-lf string-quoted-double-lflang">
in3 = [%d, %d]
</span>
<span class="source-lf string-quoted-double-lflang">
"
</span>
<span class="source-lf">
, in3[
</span>
<span class="source-lf constant-numeric-int-lflang">
0
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
value, in3[
</span>
<span class="source-lf constant-numeric-int-lflang">
1
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
value);
</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
}
</span>

<span class="source-lf">
}
</span>

<span class="source-lf">

</span>

<span class="source-lf storage-modifier-lflang">
reactor
</span>
<span class="source-lf">
 
</span>
<span class="source-lf entity-name-type-lflang">
R2
</span>
<span class="source-lf">
 {
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
logical
</span>
<span class="source-lf">
 
</span>
<span class="source-lf storage-modifier-lflang">
action
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
a1
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
logical
</span>
<span class="source-lf">
 
</span>
<span class="source-lf storage-modifier-lflang">
action
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
a2
</span>

<span class="source-lf">
  
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
r1
</span>
<span class="source-lf">
 
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
 
</span>
<span class="source-lf keyword-control-new-lflang">
new
</span>
<span class="source-lf">
[
</span>
<span class="source-lf constant-numeric-int-lflang">
3
</span>
<span class="source-lf">
] R1()
</span>

<span class="source-lf">
  
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
r4
</span>
<span class="source-lf">
 
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
 
</span>
<span class="source-lf keyword-control-new-lflang">
new
</span>
<span class="source-lf">
[
</span>
<span class="source-lf constant-numeric-int-lflang">
2
</span>
<span class="source-lf">
] R4()
</span>

<span class="source-lf">
  
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
r1
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf variable-other-lflang">
out
</span>
<span class="source-lf">
 
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
r4
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf variable-other-lflang">
in
</span>

<span class="source-lf">

</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-control-lflang">
reaction
</span>
<span class="source-lf">
(
</span>
<span class="source-lf support-variable-lflang">
startup
</span>
<span class="source-lf">
) 
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
r4
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf variable-other-lflang">
in2
</span>
<span class="source-lf">
, 
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
r4
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf variable-other-lflang">
in3
</span>
<span class="source-lf">
 {
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>

<span class="source-lf">
    lf_set(r4[
</span>
<span class="source-lf constant-numeric-int-lflang">
0
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf">
in2[
</span>
<span class="source-lf constant-numeric-int-lflang">
0
</span>
<span class="source-lf">
], 
</span>
<span class="source-lf constant-numeric-int-lflang">
44
</span>
<span class="source-lf">
);
</span>

<span class="source-lf">
    lf_set(r4[
</span>
<span class="source-lf constant-numeric-int-lflang">
1
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf">
in2[
</span>
<span class="source-lf constant-numeric-int-lflang">
0
</span>
<span class="source-lf">
], 
</span>
<span class="source-lf constant-numeric-int-lflang">
45
</span>
<span class="source-lf">
);
</span>

<span class="source-lf">
    lf_set(r4[
</span>
<span class="source-lf constant-numeric-int-lflang">
0
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf">
in2[
</span>
<span class="source-lf constant-numeric-int-lflang">
1
</span>
<span class="source-lf">
], 
</span>
<span class="source-lf constant-numeric-int-lflang">
46
</span>
<span class="source-lf">
);
</span>

<span class="source-lf">
    lf_set(r4[
</span>
<span class="source-lf constant-numeric-int-lflang">
1
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf">
in2[
</span>
<span class="source-lf constant-numeric-int-lflang">
1
</span>
<span class="source-lf">
], 
</span>
<span class="source-lf constant-numeric-int-lflang">
47
</span>
<span class="source-lf">
);
</span>

<span class="source-lf">
    lf_set(r4[
</span>
<span class="source-lf constant-numeric-int-lflang">
0
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf">
in2[
</span>
<span class="source-lf constant-numeric-int-lflang">
2
</span>
<span class="source-lf">
], 
</span>
<span class="source-lf constant-numeric-int-lflang">
48
</span>
<span class="source-lf">
);
</span>

<span class="source-lf">
    lf_set(r4[
</span>
<span class="source-lf constant-numeric-int-lflang">
1
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf">
in2[
</span>
<span class="source-lf constant-numeric-int-lflang">
2
</span>
<span class="source-lf">
], 
</span>
<span class="source-lf constant-numeric-int-lflang">
49
</span>
<span class="source-lf">
);
</span>

<span class="source-lf">

</span>

<span class="source-lf">
    lf_set(r4[
</span>
<span class="source-lf constant-numeric-int-lflang">
0
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf">
in3[
</span>
<span class="source-lf constant-numeric-int-lflang">
0
</span>
<span class="source-lf">
], 
</span>
<span class="source-lf constant-numeric-int-lflang">
50
</span>
<span class="source-lf">
);
</span>

<span class="source-lf">
    lf_set(r4[
</span>
<span class="source-lf constant-numeric-int-lflang">
1
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf">
in3[
</span>
<span class="source-lf constant-numeric-int-lflang">
0
</span>
<span class="source-lf">
], 
</span>
<span class="source-lf constant-numeric-int-lflang">
51
</span>
<span class="source-lf">
);
</span>

<span class="source-lf">
    lf_set(r4[
</span>
<span class="source-lf constant-numeric-int-lflang">
0
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf">
in3[
</span>
<span class="source-lf constant-numeric-int-lflang">
1
</span>
<span class="source-lf">
], 
</span>
<span class="source-lf constant-numeric-int-lflang">
52
</span>
<span class="source-lf">
);
</span>

<span class="source-lf">
    lf_set(r4[
</span>
<span class="source-lf constant-numeric-int-lflang">
1
</span>
<span class="source-lf">
]
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf">
in3[
</span>
<span class="source-lf constant-numeric-int-lflang">
1
</span>
<span class="source-lf">
], 
</span>
<span class="source-lf constant-numeric-int-lflang">
53
</span>
<span class="source-lf">
);
</span>

<span class="source-lf">
  
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
}
</span>

<span class="source-lf">
}
</span>

<span class="source-lf">

</span>

<span class="source-lf storage-modifier-lflang">
reactor
</span>
<span class="source-lf">
 
</span>
<span class="source-lf entity-name-type-lflang">
R3
</span>
<span class="source-lf">
 {
</span>

<span class="source-lf">
  
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
r2
</span>
<span class="source-lf">
 
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
 
</span>
<span class="source-lf keyword-control-new-lflang">
new
</span>
<span class="source-lf">
[
</span>
<span class="source-lf constant-numeric-int-lflang">
4
</span>
<span class="source-lf">
] R2()
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
logical
</span>
<span class="source-lf">
 
</span>
<span class="source-lf storage-modifier-lflang">
action
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
a1
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
logical
</span>
<span class="source-lf">
 
</span>
<span class="source-lf storage-modifier-lflang">
action
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
a2
</span>

<span class="source-lf">
}
</span>

<span class="source-lf">

</span>

<span class="source-lf storage-modifier-lflang">
main
</span>
<span class="source-lf">
 
</span>
<span class="source-lf storage-modifier-lflang">
reactor
</span>
<span class="source-lf">
 {
</span>

<span class="source-lf">
  
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
r
</span>
<span class="source-lf">
 
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
 
</span>
<span class="source-lf keyword-control-new-lflang">
new
</span>
<span class="source-lf">
[
</span>
<span class="source-lf constant-numeric-int-lflang">
2
</span>
<span class="source-lf">
] R3()
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
logical
</span>
<span class="source-lf">
 
</span>
<span class="source-lf storage-modifier-lflang">
action
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
a1
</span>

<span class="source-lf">
  
</span>
<span class="source-lf storage-modifier-lflang">
logical
</span>
<span class="source-lf">
 
</span>
<span class="source-lf storage-modifier-lflang">
action
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
a2
</span>

<span class="source-lf">
}
</span>

<span class="source-lf">

</span>

