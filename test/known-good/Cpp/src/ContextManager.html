<span class="source-lf meta-targetspec-lflang keyword-control-lflang">
target
</span>
<span class="source-lf meta-targetspec-lflang">
 
</span>
<span class="source-lf meta-targetspec-lflang constant-language-lflang">
Cpp
</span>

<span class="source-lf">

</span>

<span class="source-lf keyword-control-lflang">
public
</span>
<span class="source-lf">
 
</span>
<span class="source-lf keyword-control-lflang">
preamble
</span>
<span class="source-lf">
 {
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>

<span class="source-lf comment-line-double-dash-lflang">
    
</span>
<span class="source-lf comment-line-double-dash-lflang">
#include "RequestResponse/request_response.hh"
</span>

<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
}
</span>

<span class="source-lf">

</span>

<span class="source-lf storage-modifier-lflang">
reactor
</span>
<span class="source-lf">
 
</span>
<span class="source-lf entity-name-type-lflang">
ContextManager
</span>
<span class="source-lf">
<Req, Resp, Ctx> {
</span>

<span class="source-lf">
    
</span>
<span class="source-lf storage-modifier-lflang">
input
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
request_in
</span>
<span class="source-lf">
:
</span>
<span class="source-lf meta-embedded-block-cpp">
 
</span>
<span class="source-lf meta-embedded-block-cpp storage-type-lflang">
std
</span>
<span class="source-lf meta-embedded-block-cpp">
::
</span>
<span class="source-lf meta-embedded-block-cpp storage-type-lflang">
pair
</span>
<span class="source-lf meta-embedded-block-cpp">
<
</span>
<span class="source-lf meta-embedded-block-cpp entity-name-type-lflang">
Req
</span>
<span class="source-lf meta-embedded-block-cpp">
, 
</span>
<span class="source-lf meta-embedded-block-cpp entity-name-type-lflang">
Ctx
</span>
<span class="source-lf meta-embedded-block-cpp">
>
</span>

<span class="source-lf">
    
</span>
<span class="source-lf storage-modifier-lflang">
output
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
request_out
</span>
<span class="source-lf">
:
</span>
<span class="source-lf meta-embedded-block-cpp">
 
</span>
<span class="source-lf meta-embedded-block-cpp entity-name-type-lflang">
Req
</span>

<span class="source-lf">

</span>

<span class="source-lf">
    
</span>
<span class="source-lf storage-modifier-lflang">
input
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
response_in
</span>
<span class="source-lf">
:
</span>
<span class="source-lf meta-embedded-block-cpp">
 
</span>
<span class="source-lf meta-embedded-block-cpp entity-name-type-lflang">
Resp
</span>

<span class="source-lf">
    
</span>
<span class="source-lf storage-modifier-lflang">
output
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
response_out
</span>
<span class="source-lf">
:
</span>
<span class="source-lf meta-embedded-block-cpp">
 
</span>
<span class="source-lf meta-embedded-block-cpp storage-type-lflang">
std
</span>
<span class="source-lf meta-embedded-block-cpp">
::
</span>
<span class="source-lf meta-embedded-block-cpp storage-type-lflang">
pair
</span>
<span class="source-lf meta-embedded-block-cpp">
<
</span>
<span class="source-lf meta-embedded-block-cpp entity-name-type-lflang">
Resp
</span>
<span class="source-lf meta-embedded-block-cpp">
, 
</span>
<span class="source-lf meta-embedded-block-cpp entity-name-type-lflang">
Ctx
</span>
<span class="source-lf meta-embedded-block-cpp">
>
</span>

<span class="source-lf">

</span>

<span class="source-lf">
    
</span>
<span class="source-lf storage-modifier-lflang">
state
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-lflang">
context_buffer
</span>
<span class="source-lf">
:
</span>
<span class="source-lf meta-embedded-block-cpp">
 
</span>
<span class="source-lf">
{
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
std
</span>
<span class="source-lf keyword-operator-lflang">
::
</span>
<span class="source-lf variable-other-lflang">
map
</span>
<span class="source-lf">
<unsigned long, Ctx> 
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
}
</span>

<span class="source-lf">

</span>

<span class="source-lf">
    
</span>
<span class="source-lf keyword-control-lflang">
reaction
</span>
<span class="source-lf">
 
</span>
<span class="source-lf">
(
</span>
<span class="source-lf">
request_in) 
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
 request_out {
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>

<span class="source-lf">
        
</span>
<span class="source-lf storage-modifier-lflang">
const
</span>
<span class="source-lf">
 auto& req 
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
request_in
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf variable-other-lflang">
get
</span>
<span class="source-lf">
()
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
first;
</span>

<span class="source-lf">
        
</span>
<span class="source-lf storage-modifier-lflang">
const
</span>
<span class="source-lf">
 auto& ctx 
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
 
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
request_in
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf variable-other-lflang">
get
</span>
<span class="source-lf">
()
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf constant-numeric-lflang">
second
</span>
<span class="source-lf">
;
</span>

<span class="source-lf">
        context_buffer[
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
req
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf variable-other-lflang">
uid
</span>
<span class="source-lf">
()] 
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
 ctx;
</span>

<span class="source-lf">
        
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
request_out
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf variable-other-lflang">
set
</span>
<span class="source-lf">
(req);
</span>

<span class="source-lf">
    
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
}
</span>

<span class="source-lf">

</span>

<span class="source-lf">
    
</span>
<span class="source-lf keyword-control-lflang">
reaction
</span>
<span class="source-lf">
 
</span>
<span class="source-lf">
(
</span>
<span class="source-lf">
response_in) 
</span>
<span class="source-lf keyword-operator-lflang">
->
</span>
<span class="source-lf">
 response_out {
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>

<span class="source-lf">
        
</span>
<span class="source-lf storage-modifier-lflang">
const
</span>
<span class="source-lf">
 auto& resp 
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
 
</span>
<span class="source-lf keyword-operator-lflang">
*
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
response_in
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf variable-other-lflang">
get
</span>
<span class="source-lf">
();
</span>

<span class="source-lf">
        
</span>
<span class="source-lf storage-modifier-lflang">
const
</span>
<span class="source-lf">
 auto& ctx 
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
 context_buffer[
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
resp
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf variable-other-lflang">
uid
</span>
<span class="source-lf">
()];
</span>

<span class="source-lf">
        
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
response_out
</span>
<span class="source-lf keyword-operator-lflang">
.
</span>
<span class="source-lf variable-other-lflang">
set
</span>
<span class="source-lf">
(
</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">
std
</span>
<span class="source-lf keyword-operator-lflang">
::
</span>
<span class="source-lf variable-other-lflang">
make_pair
</span>
<span class="source-lf">
(resp, ctx));
</span>

<span class="source-lf">
    
</span>
<span class="source-lf keyword-operator-lflang">
=
</span>
<span class="source-lf">
}
</span>

<span class="source-lf">
}
</span>

<span class="source-lf">

</span>

